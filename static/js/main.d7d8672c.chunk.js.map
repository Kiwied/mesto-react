{"version":3,"sources":["images/logo.svg","images/icon-ok.svg","images/icon-cross.svg","contexts/HeaderContext.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/Auth.js","components/Login.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/utils.js","utils/Api.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Register.js","contexts/infoTooltipContext.js","components/InfoTooltip.js","components/App.js","index.js"],"names":["module","exports","HeaderContext","React","createContext","headers","register","text","redirectPath","login","Header","props","headerContext","useContext","useState","opacity","setOpacity","history","useHistory","linkStyle","color","textDecoration","transition","marginLeft","handleMouseEnter","handleMouseLeave","className","src","logoPath","alt","loggedIn","email","to","style","onMouseEnter","onMouseLeave","onClick","onHeaderChange","console","log","onSignOut","localStorage","removeItem","push","CurrentUserContext","Card","currentUser","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","link","name","type","onCardLike","length","onCardDelete","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","currentCard","key","Footer","auth","this","_baseUrl","pass","fetch","method","body","JSON","stringify","then","res","status","json","err","catch","data","token","setItem","Login","setEmail","password","setPassword","handleSubmit","evt","preventDefault","singIn","handleLogin","onError","onSubmit","placeholder","value","onChange","target","required","PopupWithForm","useEffect","handleOverlayClose","classList","contains","onClose","document","getElementById","addEventListener","removeEventListener","isOpen","id","noValidate","title","children","button","ImagePopup","EditProfilePopup","setName","description","setDescription","onUpdateUser","minLength","maxLength","pattern","EditAvatarPopup","urlRef","useRef","current","onAvatarUpdate","ref","api","baseUrl","_headers","ok","Promise","reject","_checkResponseData","cardId","authorization","AddPlacePopup","setLink","ProtectedRoute","Component","component","Register","handleLoginRedirect","onSigning","finally","InfoTooltipContext","infoTooltipCaptions","success","imgPath","okPath","fail","failPath","InfoTooltip","infoTooltipContext","withRouter","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setLoggedIn","setHeaderContext","setInfoTooltipContext","handleInfoTooltipOpen","closeAllPopups","getUserInfo","setCards","handleLogout","getInitialCards","jwt","getItem","getContent","tokenCheck","Provider","path","onLogout","exact","dislike","like","likedCard","newCards","delete","filter","newUserInfo","setNewUserInfo","newCardInfo","addNewCard","newCard","setNewAvatar","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d7d8672c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e889e45f.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-ok.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-cross.db56ee32.svg\";","import React from \"react\";\n\nexport const HeaderContext = React.createContext();\n\nexport const headers = {\n  register: {\n    text: 'Войти',\n    redirectPath: '/signin'\n  },\n  login: {\n    text: 'Регистрация',\n    redirectPath: '/signup'\n  }\n}\n","import logoPath from \"../images/logo.svg\";\nimport React from \"react\";\nimport { useHistory, Link } from 'react-router-dom';\nimport { HeaderContext } from \"../contexts/HeaderContext\";\n\nexport default function Header(props) {\n  const headerContext = React.useContext(HeaderContext);\n  const [opacity, setOpacity] = React.useState(1);\n  const history = useHistory();\n\n  const linkStyle = {\n    color: 'white',\n    textDecoration: 'none',\n    transition: 'opacity .15s linear',\n    opacity: opacity,\n    marginLeft: 24\n  }\n\n  function handleMouseEnter() {\n    setOpacity(0.6);\n  }\n\n  function handleMouseLeave() {\n    setOpacity(1);\n  }\n\n  function handleSignOut() {\n    props.onSignOut();\n    localStorage.removeItem('token');\n    history.push('/signin');\n  }\n\n  function handleLinkClick() {\n    if (headerContext.text === 'Войти') {\n      props.onHeaderChange('login')\n    }\n    if (headerContext.text === 'Регистрация') {\n      props.onHeaderChange('register')\n    }\n    console.log(headerContext);\n  }\n\n  return (\n      <header className=\"header\">\n          <img src={logoPath}\n               alt=\"Логотип сервиса Mesto\"\n               className=\"header__logo\"\n          />\n\n          <div className=\"header__container\">\n            <p className=\"header__auth\">\n              { props.loggedIn\n                ? (`${props.email} `)\n                : (\n                  <Link to={headerContext.redirectPath}\n                        style={linkStyle}\n                        onMouseEnter={handleMouseEnter}\n                        onMouseLeave={handleMouseLeave}\n                        onClick={handleLinkClick}\n                  >\n                    {headerContext.text}\n                  </Link>\n                )\n              }\n            </p>\n            {props.loggedIn && <Link to=\"\"\n                                  style={linkStyle}\n                                  onMouseEnter={handleMouseEnter}\n                                  onMouseLeave={handleMouseLeave}\n                                  onClick={handleSignOut}\n            >\n              Выйти\n            </Link>}\n          </div>\n      </header>\n  )\n}\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nexport default function Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = `element__delete ${\n    isOwn ? '' : 'element__delete_hidden'}`;\n\n\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = `element__like ${\n    isLiked ? 'element__like_active' : ''}`;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handleCardDelete() {\n    props.onCardDelete(props.card);\n  }\n\n  return(\n      <li className=\"element\">\n        <img className=\"element__image\"\n             onClick={handleClick}\n             src={props.card.link}\n             alt={`Фото ${props.card.name}`}\n        />\n        <div className=\"element__сaption\">\n          <h3 className=\"element__title\">{props.card.name}</h3>\n          <div className=\"element__likes\">\n            <button type=\"button\"\n                    className={cardLikeButtonClassName}\n                    onClick={handleLikeClick}\n            />\n            <p className=\"element__like-counter\">{props.card.likes.length}</p>\n          </div>\n        </div>\n        <button type=\"button\"\n                className={cardDeleteButtonClassName}\n                onClick={handleCardDelete}\n        />\n      </li>\n  )\n}\n","import React from \"react\";\nimport Card from \"./Card.js\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nexport default function Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__main\">\n          <div className=\"profile__avatar-container\"\n               onClick={props.onEditAvatar}>\n            <img\n              alt=\"Аватар профиля\"\n              className=\"profile__avatar\"\n              src={currentUser.avatar}\n            />\n            <div className=\"profile__avatar_overlay\"/>\n          </div>\n          <div className=\"profile__info\">\n            <div className=\"profile__row\">\n              <h2 className=\"profile__name\">{currentUser.name}</h2>\n              <button\n                onClick={props.onEditProfile}\n                type=\"button\"\n                className=\"profile__edit\">\n              </button>\n            </div>\n            <p className=\"profile__description\">{currentUser.about}</p>\n          </div>\n        </div>\n        <button\n          onClick={props.onAddPlace}\n          type=\"button\"\n          className=\"profile__add\">\n        </button>\n      </section>\n\n      <section>\n        <ul className=\"elements\">\n          {props.cards.map(currentCard => (\n            <Card\n              card={currentCard}\n              key={currentCard._id}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  )\n}\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return(\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n      </footer>\r\n  )\r\n}","class Auth {\n  constructor() {\n    this._baseUrl = 'https://auth.nomoreparties.co'\n  }\n\n  register(pass, email) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then((res) => {\n        console.log(res);\n        try {\n          if (res.status === 201){\n            return res.json();\n          }\n        } catch(err){\n          return (err);\n        }\n      })\n      .then(res => {\n        return res;\n      })\n      .catch(err => console.log(err))\n  }\n\n  singIn(pass, email) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          return data;\n        } else {\n          return;\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n      .then(res => res.json())\n      .catch(err => console.log(err))\n  }\n}\n\nexport const auth = new Auth();\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { auth } from \"../utils/Auth\";\n\nexport default function Login(props) {\n  const [opacity, setOpacity] = React.useState(1);\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  const history = useHistory();\n\n  const linkStyle = {\n    color: 'white',\n    textDecoration: 'none',\n    transition: 'opacity .15s linear',\n    opacity: opacity\n  }\n\n  function handleMouseEnter() {\n    setOpacity(0.6);\n  }\n\n  function handleMouseLeave() {\n    setOpacity(1);\n  }\n\n  function handleRegisterRedirect() {\n    props.onHeaderChange('register')\n  }\n\n  function handleEmailChange(evt) {\n    setEmail(evt.target.value);\n  }\n\n  function handlePasswordChange(evt) {\n    setPassword(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (!password || !email) {\n      return;\n    }\n    auth.singIn(password, email)\n      .then(data => {\n        if (data.token) {\n          setPassword('');\n          setEmail('');\n          props.handleLogin();\n          history.push('/');\n        }\n      })\n      .catch(() => {\n        props.onError();\n      })\n  }\n\n  return (\n    <main>\n      <section className=\"auth\">\n\n        <form className=\"auth-form\"\n              onSubmit={handleSubmit}\n        >\n          <h2 className=\"auth-form__title\">Вход</h2>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className=\"auth-form__input\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            className=\"auth-form__input\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n          <button type=\"submit\"\n                  className=\"auth-form__submit\"\n                  value=\"loggedIn\"\n                  onClick={handleSubmit}\n          >\n            Войти\n          </button>\n        </form>\n\n        <p className=\"auth__redirect\">\n          Ещё не зарегистрированы? {<Link to=\"/signup\"\n                                          style={linkStyle}\n                                          onMouseEnter={handleMouseEnter}\n                                          onMouseLeave={handleMouseLeave}\n                                          onClick={handleRegisterRedirect}\n        >\n          Регистриация\n        </Link>}\n        </p>\n      </section>\n    </main>\n  )\n}\n\n","import React from \"react\";\n\nexport default function PopupWithForm(props) {\n  React.useEffect(() => {\n    function handleOverlayClose(evt) {\n      if (evt.target.classList.contains('popup_opened')) {\n        props.onClose(evt);\n      }\n    }\n\n    document\n      .getElementById(`popup__${props.name}`)\n      .addEventListener('click', handleOverlayClose)\n\n    return() => {\n      document\n        .getElementById(`popup__${props.name}`)\n        .removeEventListener('click', handleOverlayClose)\n    }\n  }, [])\n\n  return (\n      <section\n        className={`popup ${props.isOpen && 'popup_opened'}`}\n        id={`popup__${props.name}`}\n      >\n        <form className=\"form\"\n              onSubmit={props.onSubmit}\n              noValidate\n        >\n          <h3 className=\"form__title\">{props.title}</h3>\n          {props.children}\n          <button type=\"submit\"\n                  name={props.button}\n                  className=\"form__save\"\n          >\n            {props.button}\n          </button>\n          <button onClick={props.onClose}\n                  type=\"button\"\n                  className=\"popup__close\"\n          >\n          </button>\n        </form>\n      </section>\n  )\n}\n","import React from \"react\";\n\nexport default function ImagePopup(props) {\n  React.useEffect(() => {\n    function handleOverlayClose(evt) {\n      if (evt.target.classList.contains('popup_opened')) {\n        props.onClose(evt);\n      }\n    }\n\n    document\n      .getElementById('popup__enlarged')\n      .addEventListener('click', handleOverlayClose)\n\n    return() => {\n      document\n        .getElementById('popup__enlarged')\n        .removeEventListener('click', handleOverlayClose)\n    }\n  }, [])\n\n  return (\n      <section className={`popup ${props.isOpen && 'popup_opened'}`}\n               id=\"popup__enlarged\">\n        <div className=\"popup__enlarged\">\n          <img className=\"popup__image\"\n               src={props.card.link}\n               alt={props.card.name}/>\n          <p className=\"popup__place\">{props.card.name}</p>\n          <button type=\"button\"\n                  className=\"popup__close\"\n                  onClick={props.onClose}\n          >\n          </button>\n        </div>\n      </section>\n  )\n}\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function EditProfilePopup(props) {\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleNameChange(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleDescriptionChange(evt) {\n    setDescription(evt.target.value);\n  }\n\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onUpdateUser({\n      name: name,\n      about: description\n    });\n  }\n\n  return(\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      name=\"profile\"\n      title=\"Редактировать профиль\"\n      button=\"Сохранить\"\n      children={(\n        <>\n          <input\n            type=\"text\"\n            id=\"name-input\"\n            name=\"name\"\n            placeholder=\"Имя\"\n            value={name || ''}\n            onChange={handleNameChange}\n            className=\"form__input form__input_name\"\n            minLength=\"2\" maxLength=\"40\"\n            pattern=\"^[A-Za-zА-Яа-яЁё \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"name-input-error\">\n          </span>\n          <input\n            type=\"text\"\n            id=\"description-input\"\n            name=\"about\"\n            placeholder=\"Описание\"\n            value={description || ''}\n            onChange={handleDescriptionChange}\n            className=\"form__input form__input_description\"\n            minLength=\"2\" maxLength=\"200\"\n            pattern=\"^[A-Za-zА-Яа-яЁё, \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"description-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\n\nexport default function EditAvatarPopup(props) {\n  const urlRef = React.useRef();\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onAvatarUpdate({\n      avatar: urlRef.current.value,\n    })\n    urlRef.current.value = '';\n  }\n\n  function handleClose() {\n    props.onClose();\n    urlRef.current.value = '';\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      button=\"Сохранить\"\n      children={(\n        <>\n          <input type=\"url\"\n                 id=\"avatar-link-input\"\n                 name=\"avatar\"\n                 ref={urlRef}\n                 placeholder=\"Ссылка на картинку\"\n                 className=\"form__input form__input_link\"\n                 required\n          />\n          <span className=\"form__input-error\"\n                id=\"avatar-link-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","export const apiInfo = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-12',\n  headers: {\n    authorization: '46554895-2128-4943-bcbf-ffff5703844f',\n    'Content-Type': 'application/json'\n  }\n}\n","import { apiInfo } from \"./utils.js\";\n\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkResponseData(res) {\n    if (res.ok) {\n      return res.json()\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  setNewUserInfo({ name, about }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  setNewAvatar({ avatar }) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  addNewCard({ name, link }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  like(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  dislike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  delete(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n}\n\nexport const api = new Api(apiInfo);\n\n\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\n\nexport default function AddPlacePopup(props) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleNameChange(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleLinkChange(evt) {\n    setLink(evt.target.value);\n  }\n\n  function handleClose() {\n    props.onClose();\n    setName('');\n    setLink('');\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onAddPlace({\n      name: name,\n      link: link\n    })\n    setName('');\n    setLink('');\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      name=\"new-card\"\n      title=\"Новое место\"\n      button=\"Создать\"\n      children={(\n        <>\n          <input\n            type=\"text\"\n            id=\"place-input\"\n            name=\"name\"\n            placeholder=\"Название\"\n            value={name}\n            onChange={handleNameChange}\n            className=\"form__input form__input_name\"\n            minLength=\"2\" maxLength=\"30\"\n            pattern=\"^[A-Za-zА-Яа-яЁё \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"place-input-error\">\n          </span>\n          <input\n            type=\"url\"\n            id=\"link-input\"\n            name=\"link\"\n            placeholder=\"Ссылка на картинку\"\n            value={link}\n            onChange={handleLinkChange}\n            className=\"form__input form__input_link\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"link-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\n      }\n    </Route>\n  )}\n\nexport default ProtectedRoute;\n\n\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { auth } from \"../utils/Auth\";\n\nexport default function Register(props) {\n  const [opacity, setOpacity] = React.useState(1);\n  const [password, setPassword] = React.useState('');\n  const [email, setEmail] = React.useState('');\n\n  const history = useHistory();\n\n  const linkStyle = {\n    color: 'white',\n    textDecoration: 'none',\n    transition: 'opacity .15s linear',\n    opacity: opacity\n  }\n\n  function handleMouseEnter() {\n    setOpacity(0.6);\n  }\n\n  function handleMouseLeave() {\n    setOpacity(1);\n  }\n\n  function handleLoginRedirect() {\n    props.onHeaderChange('login')\n  }\n\n  function handleEmailChange(evt) {\n    setEmail(evt.target.value);\n  }\n\n  function handlePasswordChange(evt) {\n    setPassword(evt.target.value);\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    auth.register(password, email)\n      .then(res => {\n        if (res) {\n          setPassword('');\n          setEmail('');\n          props.onSigning('success')\n          history.push('/signin');\n        } else {\n          props.onSigning('fail')\n          console.log('Что то пошло не так');\n        }\n      })\n      .finally(res => {\n        props.onSubmit();\n      })\n  }\n\n  return (\n    <main>\n      <section className=\"auth\">\n\n        <form className=\"auth-form\"\n              onSubmit={handleSubmit}\n        >\n          <h2 className=\"auth-form__title\">Регистрация</h2>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className=\"auth-form__input\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            className=\"auth-form__input\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n          <button type=\"submit\"\n                  className=\"auth-form__submit\"\n                  onClick={handleLoginRedirect}\n          >\n            Зарегистрироваться\n          </button>\n        </form>\n\n        <p className=\"auth__redirect\">\n          Уже зарегистрированы? {<Link to=\"/signin\"\n                                       style={linkStyle}\n                                       onMouseEnter={handleMouseEnter}\n                                       onMouseLeave={handleMouseLeave}\n                                       onClick={handleLoginRedirect}\n        >\n          Войти\n        </Link>}\n        </p>\n      </section>\n    </main>\n  )\n}\n","import React from \"react\";\nimport okPath from '../images/icon-ok.svg';\nimport failPath from '../images/icon-cross.svg';\n\nexport const InfoTooltipContext = React.createContext();\n\nexport const infoTooltipCaptions = {\n  success: {\n    text: 'Вы успешно зарегистрировались!',\n    imgPath: okPath\n  },\n  fail: {\n    text: 'Что-то пошло не так!\\n' +\n      'Попробуйте ещё раз.',\n    imgPath: failPath\n  }\n}\n","import React from \"react\";\nimport { InfoTooltipContext } from \"../contexts/infoTooltipContext\";\n\nexport default function InfoTooltip(props) {\n  const infoTooltipContext = React.useContext(InfoTooltipContext);\n\n  React.useEffect(() => {\n    function handleOverlayClose(evt) {\n      if (evt.target.classList.contains('popup_opened')) {\n        props.onClose(evt);\n      }\n    }\n\n    document\n      .getElementById(`popup__${props.name}`)\n      .addEventListener('click', handleOverlayClose)\n\n    return() => {\n      document\n        .getElementById(`popup__${props.name}`)\n        .removeEventListener('click', handleOverlayClose)\n    }\n  }, [])\n\n  return (\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}\n             id=\"popup__infoTooltip\"\n    >\n      <div className=\"infoTooltip\">\n        <img className=\"infoTooltip__icon\"\n             src={infoTooltipContext.imgPath}\n             alt=\"Результат регистрации\"\n        />\n        <p className=\"infoTooltip__caption\">\n          {infoTooltipContext.text}\n        </p>\n        <button onClick={props.onClose}\n                type=\"button\"\n                className=\"popup__close\"\n        >\n        </button>\n      </div>\n    </section>\n  )\n}\n","import React from 'react';\nimport '../index.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport Login from \"./Login\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport { api } from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Route, Switch, withRouter, useHistory } from 'react-router-dom';\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { HeaderContext, headers } from \"../contexts/HeaderContext\";\nimport { InfoTooltipContext, infoTooltipCaptions } from \"../contexts/infoTooltipContext\";\nimport { auth } from \"../utils/Auth\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [headerContext, setHeaderContext] = React.useState('login');\n  const [infoTooltipContext, setInfoTooltipContext] = React.useState('fail');\n  const [email, setEmail] = React.useState('');\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`);\n      })\n  }, [])\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  }\n\n  function handleInfoTooltipOpen() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleUpdateUser(newUserInfo) {\n    api.setNewUserInfo(newUserInfo)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleUpdateAvatar({avatar}) {\n    api.setNewAvatar({avatar})\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then(res => {\n        setCards(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }, [])\n\n  React.useEffect(() => {\n      tokenCheck();\n  }, [loggedIn])\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem('token');\n    if (jwt) {\n      auth.getContent(jwt)\n        .then(res => {\n          if (res) {\n            handleLogin();\n            setEmail(res.data.email);\n            history.push('/');\n          }\n        })\n    }\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    (isLiked ? api.dislike(card._id) : api.like(card._id))\n      .then((likedCard) => {\n        const newCards = cards.map((currentCard) =>\n          currentCard._id === card._id ? likedCard : currentCard\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleCardDelete(card) {\n    api.delete(card._id)\n      .then(() => {\n        const newCards = cards.filter(currentCard =>\n          currentCard._id !== card._id\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleAddPlaceSubmit(newCardInfo) {\n    api.addNewCard(newCardInfo)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function handleLogout() {\n    setLoggedIn(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"content\">\n          <HeaderContext.Provider value={headers[headerContext]}>\n            <Header loggedIn={loggedIn}\n                    email={email}\n                    onSignOut={handleLogout}\n                    onHeaderChange={setHeaderContext}\n            />\n          </HeaderContext.Provider>\n\n          <Switch>\n            <Route path=\"/signup\">\n              <Register onHeaderChange={setHeaderContext}\n                        onSubmit={handleInfoTooltipOpen}\n                        onSigning={setInfoTooltipContext}\n              />\n            </Route>\n\n            <Route path=\"/signin\">\n              <Login onHeaderChange={setHeaderContext}\n                     handleLogin={handleLogin}\n                     onLogout={handleLogout}\n                     onError={handleInfoTooltipOpen}\n              />\n            </Route>\n\n            <ProtectedRoute exact path=\"/\"\n                            loggedIn={loggedIn}\n                            component={Main}\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            cards={cards}\n                            onCardLike={handleCardLike}\n                            onCardDelete={handleCardDelete}\n            >\n            </ProtectedRoute>\n          </Switch>\n\n          {loggedIn && <Footer/>}\n\n          <InfoTooltipContext.Provider value={infoTooltipCaptions[infoTooltipContext]}>\n            <InfoTooltip\n              isOpen={isInfoTooltipOpen}\n              onClose={closeAllPopups}\n              loggedIn={loggedIn}\n              name=\"infoTooltip\"\n            />\n          </InfoTooltipContext.Provider>\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onAvatarUpdate={handleUpdateAvatar}\n          />\n\n          <PopupWithForm\n            name=\"delete\"\n            title=\"Вы уверены?\"\n            button=\"Да\"\n          />\n\n          <ImagePopup\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n            card={selectedCard}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n  ,document.getElementById('root')\n);\n\n"],"sourceRoot":""}